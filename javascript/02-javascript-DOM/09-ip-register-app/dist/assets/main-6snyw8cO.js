import"./style-ZXlAmUhd.js";import{J as P}from"./just-validate.es-oWIsisIf.js";let d;const q=new Uint8Array(16);function S(){if(!d&&(d=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(q)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function C(e,r=0){return s[e[r+0]]+s[e[r+1]]+s[e[r+2]]+s[e[r+3]]+"-"+s[e[r+4]]+s[e[r+5]]+"-"+s[e[r+6]]+s[e[r+7]]+"-"+s[e[r+8]]+s[e[r+9]]+"-"+s[e[r+10]]+s[e[r+11]]+s[e[r+12]]+s[e[r+13]]+s[e[r+14]]+s[e[r+15]]}const x=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:x};function b(e,r,n){if(w.randomUUID&&!r&&!e)return w.randomUUID();e=e||{};const t=e.random||(e.rng||S)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,r){n=n||0;for(let o=0;o<16;++o)r[n+o]=t[o];return r}return C(t)}const u=document.getElementById("registerationForm"),l="userId",a=new P(u,{validateBeforeSubmitting:!0});a.addField("#firstname",[{rule:"required",errorMessage:"FirstName is required"},{rule:"minLength",value:3},{rule:"maxLength",value:15}],{errorLabelCssClass:["form-error"]});a.addField("#lastname",[{rule:"required",errorMessage:"LastName is required"},{rule:"minLength",value:3},{rule:"maxLength",value:15}],{errorLabelCssClass:["form-error"]});a.addRequiredGroup("#gender","Please select a gender",{errorLabelCssClass:["form-error"]});a.addField("#username",[{rule:"required",errorMessage:"UserName is required"},{rule:"minLength",value:3},{rule:"maxLength",value:15}],{errorLabelCssClass:["form-error"]});a.addField("#email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,errorMessage:"Enter a valid email address"}],{errorLabelCssClass:["form-error"]});a.addField("#newPassword",[{rule:"required",errorMessage:"Password is required"},{rule:"customRegexp",value:/[!@#$%^&*(),.?":{}|<>]/,errorMessage:"Password must contain at least one special character"},{rule:"minLength",value:8,errorMessage:"Password must be at least 8 characters long"}],{errorLabelCssClass:["form-error"]});a.addField("#confirmPassword",[{rule:"required",errorMessage:"Confirm Password is required"},{validator:e=>{const r=document.querySelector("#newPassword").value;return e===r},errorMessage:"Passwords should be the same"}],{errorLabelCssClass:["form-error"]});const p=document.querySelector("#newPassword"),c=document.querySelector("#newshowPassword"),m=document.querySelector("#newhidePassword");c.addEventListener("click",()=>{m.classList.remove("hidden"),p.type="text",c.classList.add("hidden")});m.addEventListener("click",()=>{c.classList.remove("hidden"),p.type="password",m.classList.add("hidden")});const y=document.querySelector("#confirmPassword"),g=document.querySelector("#confirmshowPassword"),h=document.querySelector("#confirmhidePassword");g.addEventListener("click",()=>{h.classList.remove("hidden"),y.type="text",g.classList.add("hidden")});h.addEventListener("click",()=>{g.classList.remove("hidden"),y.type="password",h.classList.add("hidden")});a.addField("#terms",[{rule:"required",errorMessage:"Please accept the Terms and Conditions."}],{errorLabelCssClass:["form-error"]});const v=document.getElementById("ipaddress");let i=new XMLHttpRequest;i.onreadystatechange=function(){if(this.readyState===4&&this.status===200){const e=i.responseText.trim();v.value=e}};i.open("GET","https://ipv4.icanhazip.com/");i.send();const L=document.querySelector("#time"),U=new Date,D={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0},E=U.toLocaleString("en-US",D);L.value=E;a.onSuccess(()=>{const e=new FormData(u);e.append("id",b()),e.append("dateAndTime",L.value),e.append("ipAddress",v.value);const r=Object.fromEntries(e.entries()),n=localStorage.getItem(l),t=JSON.parse(n),o=[];t?(t.push(r),localStorage.setItem(l,JSON.stringify(t))):(o.push(r),localStorage.setItem(l,JSON.stringify(o))),alert("You have Registered successfully!"),window.location.href="./login.html",u.reset()});
